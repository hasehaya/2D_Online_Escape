# 画面遷移・UIフロー企画書

現在の実装に基づいたアプリケーションの画面遷移と各画面のUI構成をまとめたものです。

## 1. 全体フロー図

```mermaid
graph TD
    Start[起動] --> Title[タイトル画面]
    
    subgraph OutGame [アウトゲーム]
        Title -- "部屋作成" --> Lobby[マッチング待機室]
        Title -- "部屋参加 (ID入力)" --> Lobby
        Title -- "設定ボタン" --> Settings[設定ポップアップ]
        Settings -- "閉じる" --> Title
        Lobby -- "退出" --> Title
    end

    subgraph InGame [インゲーム]
        Lobby -- "全員準備完了" --> Game[ゲーム本編]
        Game -- "クリア/ゲームオーバー" --> Result[リザルト画面 (未実装)]
        Result --> Title
    end
```

## 2. 各画面の詳細

### 2.1 タイトル画面 (Title Scene)
アプリケーションの入り口となる画面です。

**主な機能:**
*   サーバー接続（自動）
*   部屋の作成（ホスト）
*   部屋への参加（ゲスト）
*   設定画面の呼び出し

#### 📊 情報表示要素
| 要素名 | UI種類 | 配置 | 説明 |
| :--- | :--- | :--- | :--- |
| **ステータステキスト** | Text | 画面上部 | サーバー接続状況やエラーメッセージをリアルタイム表示 |

#### 🎮 操作要素

**部屋作成エリア**
| 要素名 | UI種類 | 説明 |
| :--- | :--- | :--- |
| **部屋作成ボタン** | Button | ランダムな6桁のIDで新規部屋を作成してロビーへ遷移 |

**部屋参加エリア**
| 要素名 | UI種類 | 説明 |
| :--- | :--- | :--- |
| **部屋ID入力欄** | InputField | 参加する部屋の6桁の数字ID（100000-999999）を入力 |
| **部屋参加ボタン** | Button | 入力されたIDの部屋に参加してロビーへ遷移 |

**その他**
| 要素名 | UI種類 | 配置 | 説明 |
| :--- | :--- | :--- | :--- |
| **設定ボタン** | Button | 画面右上 | 設定ポップアップを表示（歯車アイコン想定） |

---

### 2.2 設定ポップアップ (Settings Popup)
タイトル画面（将来的にはインゲームも想定）から呼び出せる設定画面です。

#### 🔊 音声設定
| 要素名 | UI種類 | 範囲 | 説明 |
| :--- | :--- | :--- | :--- |
| **BGM音量スライダー** | Slider | 0.0 - 1.0 | バックグラウンドミュージックの音量を調整 |
| **SE音量スライダー** | Slider | 0.0 - 1.0 | 効果音（SE）の音量を調整 |

#### 🌐 その他設定
| 要素名 | UI種類 | 説明 |
| :--- | :--- | :--- |
| **言語選択ドロップダウン** | Dropdown | UI言語を選択（現在はプレースホルダー実装） |

#### 🎮 操作ボタン
| 要素名 | UI種類 | 配置 | 説明 |
| :--- | :--- | :--- | :--- |
| **閉じるボタン** | Button | ポップアップ右上/下部 | 設定を保存してポップアップを閉じる |

---

### 2.3 マッチング待機室 (Matching Room / Lobby)
ゲーム開始前にプレイヤーが集まる待機画面です。

**主な機能:**
*   部屋IDの確認
*   参加プレイヤーの確認
*   準備完了状態の切り替え
*   ゲーム開始（ホストのみ、全員準備完了時）

#### 📊 情報表示要素
| 要素名 | UI種類 | 配置 | 説明 |
| :--- | :--- | :--- | :--- |
| **部屋ID表示** | Text | 画面上部 | 現在の部屋ID（例: "Room ID: 1234"）を表示 |
| **ステータステキスト** | Text | 画面中央上部 | 「プレイヤー待機中」「準備完了」などの状態メッセージ |

#### 👥 プレイヤー情報
| 要素名 | UI種類 | 説明 |
| :--- | :--- | :--- |
| **Player 1 表示** | Text + Icon | ホストプレイヤーの名前と準備状態アイコン（✓/✗） |
| **Player 2 表示** | Text + Icon | ゲストプレイヤーの名前と準備状態アイコン（✓/✗） |

#### 🎮 操作ボタン
| 要素名 | UI種類 | 配置 | 説明 |
| :--- | :--- | :--- | :--- |
| **READYボタン** | Button | 画面中央下部 | 準備完了状態をトグル（OK ⇄ キャンセル） |
| **退出ボタン** | Button | 画面下部 | 部屋から退出し、タイトル画面へ戻る |

---

### 2.4 ゲーム本編 (Game Scene)
脱出ゲームのメイン画面です。

**主な機能:**
*   視点移動（左右）
*   気になる場所の拡大（ズーム）
*   アイテムの取得・使用
*   インベントリ確認

#### 🖼️ 表示エリア
| 要素名 | UI種類 | 配置 | 説明 |
| :--- | :--- | :--- | :--- |
| **メインビュー** | Image/3D | 画面中央 | 現在の視点（壁や拡大場所）を表示 |

#### 🧭 ナビゲーション
| 要素名 | UI種類 | 配置 | 表示条件 | 説明 |
| :--- | :--- | :--- | :--- | :--- |
| **左移動ボタン** | Button | 画面左側 | 通常ビュー時 | 視点を左の壁に切り替える |
| **右移動ボタン** | Button | 画面右側 | 通常ビュー時 | 視点を右の壁に切り替える |
| **戻るボタン** | Button | 画面上部 | 拡大ビュー時 | 拡大ビューから前のビューに戻る |

#### 🎒 インベントリ
| 要素名 | UI種類 | 配置 | 説明 |
| :--- | :--- | :--- | :--- |
| **インベントリパネル** | ScrollView | 画面下部 | 所持アイテムのアイコン一覧を表示・選択可能 |

---

### 2.5 リザルト画面 (Result Scene) - ※未実装
ゲームクリアまたは失敗時の画面。

#### 📊 予定UI要素
| 要素名 | UI種類 | 説明 |
| :--- | :--- | :--- |
| **リザルトタイトル** | Text | 「CLEAR!」「FAILED...」などの結果表示 |
| **クリアタイム** | Text | ゲームの経過時間を表示 |
| **演出エリア** | Animation | 成功/失敗に応じたビジュアル演出 |
| **タイトルへ戻るボタン** | Button | タイトル画面へ遷移 |

**実装予定:**
*   クリアタイム計測システム
*   リザルト演出
*   統計情報の表示（オプション）
