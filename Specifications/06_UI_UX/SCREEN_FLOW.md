# 画面遷移・UIフロー企画書

現在の実装に基づいたアプリケーションの画面遷移と各画面のUI構成をまとめたものです。

## 1. 全体フロー図

```mermaid
graph TD
    Start[起動] --> Title[タイトル画面]
    
    subgraph OutGame [アウトゲーム]
        Title -- "部屋作成" --> Lobby[マッチング待機室]
        Title -- "部屋参加 (ID入力)" --> Lobby
        Title -- "設定ボタン" --> Settings[設定ポップアップ]
        Settings -- "閉じる" --> Title
        Lobby -- "退出" --> Title
    end

    subgraph InGame [インゲーム]
        Lobby -- "全員準備完了" --> Game[ゲーム本編]
        Game -- "クリア/ゲームオーバー" --> Result[リザルト画面 (未実装)]
        Result --> Title
    end
```

## 2. 各画面の詳細

### 2.1 タイトル画面 (Title Scene)
アプリケーションの入り口となる画面です。

**主な機能:**
*   サーバー接続（自動）
*   部屋の作成（ホスト）
*   部屋への参加（ゲスト）
*   設定画面の呼び出し

**UI要素:**
| 要素名 | 種類 | 説明 |
| :--- | :--- | :--- |
| **ステータステキスト** | Text | 現在の接続状況やエラーメッセージを表示 |
| **部屋作成ボタン** | Button | ランダムな4桁のIDで部屋を作成し、ロビーへ遷移 |
| **部屋ID入力欄** | InputField | 参加する部屋の4桁の数字IDを入力 |
| **部屋参加ボタン** | Button | 入力されたIDの部屋に参加し、ロビーへ遷移 |
| **設定ボタン** | Button | 設定ポップアップを表示 |

---

### 2.2 設定ポップアップ (Settings Popup)
タイトル画面（将来的にはインゲームも想定）から呼び出せる設定画面です。

**UI要素:**
| 要素名 | 種類 | 説明 |
| :--- | :--- | :--- |
| **BGM音量** | Slider | BGMの音量を調整 (0.0 - 1.0) |
| **SE音量** | Slider | 効果音の音量を調整 (0.0 - 1.0) |
| **言語選択** | Dropdown | 言語を選択 (現在はプレースホルダー) |
| **閉じるボタン** | Button | 設定を保存してポップアップを閉じる |

---

### 2.3 マッチング待機室 (Matching Room / Lobby)
ゲーム開始前にプレイヤーが集まる待機画面です。

**主な機能:**
*   部屋IDの確認
*   参加プレイヤーの確認
*   準備完了状態の切り替え
*   ゲーム開始（ホストのみ、全員準備完了時）

**UI要素:**
| 要素名 | 種類 | 説明 |
| :--- | :--- | :--- |
| **部屋ID表示** | Text | 現在の部屋ID (例: "Room ID: 1234") を表示 |
| **Player 1 表示** | Text/Icon | ホストプレイヤーの名前と準備状態アイコン |
| **Player 2 表示** | Text/Icon | ゲストプレイヤーの名前と準備状態アイコン |
| **ステータステキスト** | Text | "プレイヤー待機中" や "準備完了" などの状態を表示 |
| **READYボタン** | Button | 準備完了状態をトグルする (OK / キャンセル) |
| **退出ボタン** | Button | 部屋から退出し、タイトル画面へ戻る |

---

### 2.4 ゲーム本編 (Game Scene)
脱出ゲームのメイン画面です。

**主な機能:**
*   視点移動（左右）
*   気になる場所の拡大（ズーム）
*   アイテムの取得・使用
*   インベントリ確認

**UI要素:**
| 要素名 | 種類 | 説明 |
| :--- | :--- | :--- |
| **メインビュー** | Image/3D | 現在の視点（壁や拡大場所）を表示 |
| **左移動ボタン** | Button | 視点を左の壁に切り替える (拡大中は非表示) |
| **右移動ボタン** | Button | 視点を右の壁に切り替える (拡大中は非表示) |
| **戻るボタン** | Button | 拡大ビューから前のビューに戻る (通常時は非表示) |
| **インベントリ** | ScrollView | 所持アイテムのアイコン一覧を表示 |

---

### 2.5 リザルト画面 (Result Scene) - ※未実装
ゲームクリアまたは失敗時の画面。

**予定機能:**
*   クリアタイム表示
*   成功/失敗の演出
*   タイトルへ戻るボタン
